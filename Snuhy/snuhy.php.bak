<?php
/**
 * Plugin Name: Snuhy
 * Description: Smart internal/external linking assistant with admin UI and REST API.
 * Version: 0.2.0
 * Author: Snuhy
 * Text Domain: snuhy
 */

if (!defined('ABSPATH')) { exit; }

define('SNUHY_VER',  '0.2.0');
define('SNUHY_PATH', plugin_dir_path(__FILE__));
define('SNUHY_URL',  plugin_dir_url(__FILE__));

/**
 * Load textdomain
 */
add_action('plugins_loaded', function(){
    load_plugin_textdomain('snuhy', false, dirname(plugin_basename(__FILE__)).'/languages/');
});

/**
 * Activation / Deactivation (اختياري خفيف)
 */
register_activation_hook(__FILE__, function(){
    if (!get_option('snuhy_links')) {
        update_option('snuhy_links', array()); // مصفوفة روابط فارغة
    }
});
register_deactivation_hook(__FILE__, function(){
    // لا شيء إلزامي الآن
});

/**
 * Bootstrap
 */
require_once SNUHY_PATH.'includes/class-snuhy-admin.php';
require_once SNUHY_PATH.'includes/class-snuhy-rest.php';

add_action('plugins_loaded', function(){
    // Admin UI
    if (is_admin()) {
        $admin = new Snuhy_Admin();
        $admin->init();
    }
    // REST API
    $rest = new Snuhy_Rest();
    $rest->init();
});
